{% extends "base_site.html" %}
{% load i18n %}

{% block extrastyle %}
{% load adminmedia %}
<link rel="stylesheet" type="text/css" href="{% admin_media_prefix %}css/dashboard.css" />
{% endblock extrastyle %}

{% block extrahead %}
<script type="text/javascript" src="{% admin_media_prefix %}js/jquery-1.1.3.1.pack.js"></script>
<script type="text/javascript" src="{% admin_media_prefix %}js/jquery.tablesorter.js"></script>
{% endblock %}

{% block breadcrumbs %}<div class="breadcrumbs">
	<a href="{% url dashboard.views.dashboard %}">{% trans "dashboard" %}</a> &gt; {{ groupe.nom }}
</div>{% endblock %}

{% block content %}
<h2>{{ groupe.nom }}</h2>
{%if groupe.workdone %}
<p>{% trans "Download works from this group:" %}</p>
<ul>
{% for work in groupe.workdone %}
<li class="nop"><a href="{{ media_url }}{{ workdone }}/{{ work }}">{{ work }}</a></li>
{% endfor %}
</ul>
{% endif %}
<script type="text/javascript">
    $(document).ready(function() {
        $("#lista").tablesorter({ widgets: ['zebra']});
		{% if gid %}
		var c = [[0,0]];
		{% else %}
		var c = [[0,0],[1,0]];
		{% endif %}
        $("#lista").trigger("sorton",[c]);
        return false;
})
</script>
<table id="lista" class="tabcours" width="100%">
    <thead>
        <tr>
            <th>{% trans "Name" %}</th>
            <th>{% trans "Email" %}</th>
            <th style="text-align: center;">{% trans "Last login" %}</th>
            <th style="text-align:center;">
                {% trans "Completed <br />courses" %} / {{ groupe.nb_cours }}
            </th>
            <th style="text-align:center;">
                {% trans "Uploaded<br />works" %}
                / {{ groupe.nb_works }}
            </th>
            <th style="text-align:center;">{% trans "Current course" %}</th>
            <th style="text-align:center;">
                {% trans "Validated modules<br />in current course" %}
            </th>
            <th style="text-align:center;">{% trans "State" %}</th>
        </tr>
    </thead>
    <tfoot></tfoot>
    <tbody>
	{% for student in groupe.users %}
    <tr>
        <td>{{ student.get_name }}</td>
        <td><a href="{{ student.get_absolute_url }}">{{ student.email }}</a></td>
        <td style="text-align: center;">{{ student.last_login }}</td>
        <td style="text-align: center;">{{ student.nb_cours_valides }}</td>
        <td style="text-align: center;">{{ student.nb_travaux_rendus }}</td>
        <td style="text-align: center;">{{ student.cours_courant.titre }}</td>
        <td style="text-align: center;">
            {{ student.nb_modules_valides_in_current }}
            / {{ student.nb_modules_in_current }}
        </td>
        <td style="text-align: center;">
            <img src="{% admin_media_prefix %}img/admin/{% if student.state %}icon-no.gif{% else %}icon-yes.gif{% endif %}" 
            alt="{{ student.state }}" />
        </td>
    </tr>
	{% empty %}
	<tr><td colspan="8">{% trans "This group is empty." %}</td></tr>
    {% endfor %}
</tbody>
</table>
{% endblock content %}

